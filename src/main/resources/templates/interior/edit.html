<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>글 수정하기</title>
</head>
<body>
<h1>글 수정하기</h1>

<form th:action="@{/interior/edit}" method="post" enctype="multipart/form-data">
  <!-- 수정용 postId 전송 -->
  <input type="hidden" name="postId" th:value="${dto.postId}"/>

  <label>제목:</label><br/>
  <input type="text" name="title" th:value="${dto.title}" required/><br/><br/>

  <!-- 작성자 (변경 불가) - 제목 아래로 이동 -->
  <div th:if="${loginUser != null}">
    <label>작성자:</label><br/>
    <input type="text" th:value="${loginUser.nickname}" readonly/><br/><br/>
    <input type="hidden" name="email" th:value="${loginUser.email}"/>
  </div>

  <label>내용:</label><br/>
  <textarea name="content" rows="10" cols="60" required th:text="${dto.content}"></textarea><br/><br/>

  <!-- 기존 이미지 미리보기 -->
  <div th:if="${dto.filePathList != null}">
    <label>기존 이미지:</label><br/>
    <div th:each="path : ${dto.filePathList}">
      <img th:src="@{${path}}" alt="기존 이미지" width="300"/><br/><br/>
    </div>
  </div>

  <label>새 이미지 첨부 (기존 이미지 유지 시 무시):</label><br/>
  <input type="file" name="files" multiple accept="image/*"/><br/><br/>

  <button type="submit">수정</button>
  <a th:href="@{'/interior/' + ${dto.postId}}">취소</a>
</form>


</body>
</html>
